<div class="d-flex justify-content-between mb-3">
  <h3>Usuarios</h3>
  <button class="btn btn-primary"
          data-bs-toggle="modal"
          data-bs-target="#createUserModal">
    Crear Usuario
  </button>
</div>

<div *ngIf="message" class="alert alert-info">
  {{message}}
</div>

<div class="card shadow">
  <div class="card-body">

    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>Rol</th>
          <th>Estado</th>
          <th>Acci√≥n</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let user of users">
          <td>{{user.id}}</td>
          <td>{{user.username}}</td>
          <td>{{user.role}}</td>
          <td>
            <span class="badge"
                  [ngClass]="user.isApproved ? 'bg-success' : 'bg-warning text-dark'">
              {{ user.isApproved ? 'Aprobado' : 'Pendiente' }}
            </span>
          </td>
          <td>
            <button *ngIf="!user.isApproved"
                    class="btn btn-sm btn-success"
                    (click)="approve(user.id)">
              Aprobar
            </button>
          </td>
        </tr>
      </tbody>
    </table>

  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="createUserModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Crear Usuario</h5>
        <button type="button" class="btn-close"
                data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <div class="mb-3">
          <input type="text"
                 class="form-control"
                 placeholder="Username"
                 [(ngModel)]="newUser.username">
        </div>

        <div class="mb-3">
          <input type="email"
                 class="form-control"
                 placeholder="Email"
                 [(ngModel)]="newUser.email">
        </div>

        <div class="mb-3">
          <input type="password"
                 class="form-control"
                 placeholder="Password"
                 [(ngModel)]="newUser.password">
        </div>

        <div class="mb-3">
          <select class="form-select"
                  [(ngModel)]="newUser.roleId">
            <option [value]="2">Gestor</option>
            <option [value]="3">Cajero</option>
          </select>
        </div>

      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary"
                data-bs-dismiss="modal">
          Cancelar
        </button>

        <button class="btn btn-primary"
                (click)="createUser()">
          Guardar
        </button>
      </div>

    </div>
  </div>
</div>
